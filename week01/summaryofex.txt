
mainp.c

#include<stdio.h>
#define opit(x, y) (x+y*3.14)
int main()
	{
		int x=5; int y=6;
		printf("operation evaluates to %f",opit(x,y));
		return 0;
	}


	
output screen:

dnyanesh@computer:~/58/Compiler-Construction/week01/simple$ gcc -Wall -save-temps mainp.c -o output
dnyanesh@computer:~/58/Compiler-Construction/week01/simple$ ls
mainp.c  mainp.i  mainp.o  mainp.s  output
dnyanesh@computer:~/58/Compiler-Construction/week01/simple$ ls -sh
total 48K
4.0K mainp.c   16K mainp.i  4.0K mainp.o  4.0K mainp.s   20K output


dnyanesh@computer:~/58/Compiler-Construction/week01/simple$ cat mainp.i
# 1 "mainp.c"
# 1 "<built-in>"
# 1 "<command-line>"
# 31 "<command-line>"
# 1 "/usr/include/stdc-predef.h" 1 3 4
# 32 "<command-line>" 2
# 1 "mainp.c"
# 1 "/usr/include/stdio.h" 1 3 4


****some lines are eliminated****


extern int __overflow (FILE *, int);
# 879 "/usr/include/stdio.h" 3 4

# 2 "mainp.c" 2


# 3 "mainp.c"
int main()
 {
  int x=5; int y=6;
  printf("operation evaluates to %f",(x+y*3.14));
  return 0;
 }


mainp.s


dnyanesh@computer:~/58/Compiler-Construction/week01/simple$ cat mainp.s
	.file	"mainp.c"
	.text
	.section	.rodata
.LC1:
	.string	"operation evaluates to %f"
	.text
	.globl	main
	.type	main, @function
main:
.LFB0:
	.cfi_startproc
	pushq	%rbp
	.cfi_def_cfa_offset 16
	.cfi_offset 6, -16
	movq	%rsp, %rbp
	.cfi_def_cfa_register 6
	subq	$16, %rsp
	movl	$5, -8(%rbp)
	movl	$6, -4(%rbp)
	cvtsi2sd	-8(%rbp), %xmm1
	cvtsi2sd	-4(%rbp), %xmm2
	movsd	.LC0(%rip), %xmm0
	mulsd	%xmm2, %xmm0
	addsd	%xmm1, %xmm0
	leaq	.LC1(%rip), %rdi
	movl	$1, %eax
	call	printf@PLT
	movl	$0, %eax
	leave
	.cfi_def_cfa 7, 8
	ret
	.cfi_endproc
.LFE0:
	.size	main, .-main
	.section	.rodata
	.align 8
.LC0:
	.long	1374389535
	.long	1074339512
	.ident	"GCC: (Ubuntu 8.2.0-7ubuntu1) 8.2.0"
	.section	.note.GNU-stack,"",@progbits



mainp.o

dnyanesh@computer:~/58/Compiler-Construction/week01/simple$ cat mainp.o
ELF>(@@
UH��H���E��E��*M��*U���Y��X�H�=�����operation evaluates to %f��Q�	@GCC: (Ubuntu 8.2.0-7ubuntu1) 8.2.0zRx
C                            HA�C
��      H$mainp.cmain_GLOBAL_OFFSET_TABLE_printf$3��������=
                                                           �������� .symtab.strtab.shstrtab.rela.text.data.bss.rodata.comment.note.GNU-stack.rela.eh_frame @H`H
&��1�90�$B�W�R@�
 
 	0+�


output screen:

dnyanesh@computer:~/58/Compiler-Construction/week01/simple$ ls
mainp.c  mainp.i  mainp.o  mainp.s  output
adnyanesh@computer:~/58/Compiler-Construction/week01/simple$ ./output
operation evaluates to 23.840000dnyanesh@computer:~/58/Compiler-Construction/week01/simple$ ls
mainp.c  mainp.i  mainp.o  mainp.s  output
dnyanesh@computer:~/58/Compiler-Construction/week01/simple$ ls -sh
total 48K
4.0K mainp.c   16K mainp.i  4.0K mainp.o  4.0K mainp.s   20K output





program with separate definitions:


defs.c

#include"header.h"
#define a 20
#define b 12
#define c 18
#define opit(a, b, c) (a*a+2*a*b+c)



mainp.c

#include<stdio.h>
#include"defs.c"
int main(){
	printf("operation evaluates to %d",opit(a,b,c));
	return 0;
}



mainp.i

# 1 "mainp.c"
# 1 "<built-in>"
# 1 "<command-line>"
# 31 "<command-line>"
# 1 "/usr/include/stdc-predef.h" 1 3 4
# 32 "<command-line>" 2
# 1 "mainp.c"
# 1 "/usr/include/stdio.h" 1 3 4
# 27 "/usr/include/stdio.h" 3 4
# 1 "/usr/include/x86_64-linux-gnu/bits/libc-header-start.h" 1 3 4
# 33 "/usr/include/x86_64-linux-gnu/bits/libc-header-start.h" 3 4
# 1 "/usr/include/features.h" 1 3 4
# 424 "/usr/include/features.h" 3 4


*****some text was left out*****

extern int ftrylockfile (FILE *__stream) __attribute__ ((__nothrow__ , __leaf__)) ;


extern void funlockfile (FILE *__stream) __attribute__ ((__nothrow__ , __leaf__));
# 864 "/usr/include/stdio.h" 3 4
extern int __uflow (FILE *);
extern int __overflow (FILE *, int);
# 879 "/usr/include/stdio.h" 3 4

# 2 "mainp.c" 2
# 1 "defs.c" 1
# 1 "header.h" 1

# 1 "header.h"
void disp(int, int, int);
# 2 "defs.c" 2
# 3 "mainp.c" 2
int main(){
 printf("operation evaluates to %d",(20*20 +2*20*12 +18));
 return 0;
}



mainp.s

	.file	"mainp.c"
	.text
	.section	.rodata
.LC0:
	.string	"operation evaluates to %d"
	.text
	.globl	main
	.type	main, @function
main:
.LFB0:
	.cfi_startproc
	pushq	%rbp
	.cfi_def_cfa_offset 16
	.cfi_offset 6, -16
	movq	%rsp, %rbp
	.cfi_def_cfa_register 6
	movl	$898, %esi
	leaq	.LC0(%rip), %rdi
	movl	$0, %eax
	call	printf@PLT
	movl	$0, %eax
	popq	%rbp
	.cfi_def_cfa 7, 8
	ret
	.cfi_endproc
.LFE0:
	.size	main, .-main
	.ident	"GCC: (Ubuntu 8.2.0-7ubuntu1) 8.2.0"
	.section	.note.GNU-stack,"",@progbits



mainp.o

dnyanesh@computer:~/58/Compiler-Construction/week01/sepdefs$ cat mainp.o
ELF>�@@
UH�徂H�=���]�operation evaluates to %dGCC: (Ubuntu 8.2.0-7ubuntu1) 8.2.0zRx
\                                                                         !A�C
��      !$mainp.cmain_GLOBAL_OFFSET_TABLE_printf
                                                ��������
                                                        �������� .symtab.strtab.shstrtab.rela.text.data.bss.rodata.comment.note.GNU-stack.rela.eh_frame @!(0
&aa1a�90{$B�W�R@X
� 
  	�+p



output screen:

adnyanesh@computer:~/58/Compiler-Construction/week01/sepdefs$ 
dnyanesh@computer:~/58/Compiler-Construction/week01/sepdefs$ ./output
operation evaluates to 898
dnyanesh@computer:~/58/Compiler-Construction/week01/sepdefs$ ls
defs.c  header.h  mainp.c  mainp.i  mainp.o  mainp.s  new.txt  output
dnyanesh@computer:~/58/Compiler-Construction/week01/sepdefs$ ls -sh
total 60K
4.0K defs.c    4.0K mainp.c  4.0K mainp.o  4.0K new.txt
4.0K header.h   16K mainp.i  4.0K mainp.s   20K output

program: #if,#else,#endif

#include<stdio.h>
#define legs 8

int main(){

	#if (legs == 8)
	printf("Definately Octopus");

	#else
	printf("Not Octopus");

	#endif
	return 0;
}

output:

dnyanesh@computer:~/58/Compiler-Construction/week01/if$ ls
if  if.c  if.i  if.o  if.s
dnyanesh@computer:~/58/Compiler-Construction/week01/if$ gcc if.c
dnyanesh@computer:~/58/Compiler-Construction/week01/if$ ./a.out 
Definately Octopus

program: #ifdef

#include<stdio.h>
#define LOKI "says_it"

int main(){

	#ifdef LOKI
	printf("Well for one thing, I'm not Asgardian. And for another, We have a Hulk.");

	#else
	printf("PUANY GOWD!");
	#endif
	
	return 0;
}


program: #ifndef

#include<stdio.h>
#define TONY "WHOSGAMORA"

int main(){

	#ifdef TONY
	{	
		#ifndef PETER
			{
				printf("PETER not defined. IT'S REWIND TIME\n");
				#define PETER "YZGAMORA"
			}
		#else
			printf("PETER is already defined");
		#endif
	}
	#endif
	printf("\nTONY: %s\nPETER: %s\n",TONY,PETER);

	return 0;
}


program: #pragma

#include <stdio.h>

void function1( );
void function2( );

#pragma startup function1
#pragma exit function2

int main( )
{
   printf ( "\n Now we are in main function" ) ;
   return 0;
}

void function1( )
{
   printf("\nFunction1 is called before main function call");
}

void function2( )
{
   printf ( "\nFunction2 is called just before end of " \
            "main function" ) ;
}
